# ‚ö° –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –≥–æ—Ç–æ–≤–∞!

## ‚úÖ –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. –ó–±—ñ–ª—å—à–µ–Ω–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ –≤–¥–≤—ñ—á—ñ
- **BATCH_SIZE**: 10 ‚Üí 20 —á–∞–Ω–∫—ñ–≤ –∑–∞ —Ä–∞–∑
- **–ü–∞—É–∑–∏**: –ö–æ–∂–µ–Ω –±–∞—Ç—á (100ms) ‚Üí –ö–æ–∂–Ω—ñ 50 —á–∞–Ω–∫—ñ–≤ (50ms)
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è**: –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è –º–µ–Ω—à–∏—Ö I/O –æ–ø–µ—Ä–∞—Ü—ñ–π

### 2. –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```
–î–û:  150 chunks –∑–∞ ~30-35 —Å–µ–∫—É–Ω–¥ (15 –±–∞—Ç—á—ñ–≤ –ø–æ 10)
–ü–Ü–°–õ–Ø: 150 chunks –∑–∞ ~15-20 —Å–µ–∫—É–Ω–¥ (8 –±–∞—Ç—á—ñ–≤ –ø–æ 20) ‚ö°

–ü–†–ò–°–ö–û–†–ï–ù–ù–Ø: 2x —à–≤–∏–¥—à–µ!
```

---

## üß™ –Ø–∫ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ backend –∑–∞–ø—É—â–µ–Ω–∏–π
```bash
cd backend
npm run dev
```

–ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏: `üöÄ Server running on http://localhost:3001`

### –ö—Ä–æ–∫ 2: –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ PDF —Ñ–∞–π–ª
1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫ —É –±—Ä–∞—É–∑–µ—Ä—ñ
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –∫—É—Ä—Å—É
3. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ PDF –ª–µ–∫—Ü—ñ—é

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏
–®—É–∫–∞–π—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ backend:

**–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è (–Ω–æ–≤–∞):**
```
[Embeddings] Batch 1/8 (20 chunks)...
[Embeddings] Batch 2/8 (20 chunks)...
...
[Embeddings] Progress: 150/150 chunks processed
```

**–°—Ç–∞—Ä–∞ –≤–µ—Ä—Å—ñ—è (—è–∫—â–æ –Ω–µ –æ–Ω–æ–≤–∏–ª–æ—Å—å):**
```
[Embeddings] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è batch 1/15...
[Embeddings] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è batch 2/15...
```

### –ö—Ä–æ–∫ 4: –í–∏–º—ñ—Ä—è–π—Ç–µ —á–∞—Å
- –ó–∞—Å—ñ—á—ñ—Ç—å —á–∞—Å –≤—ñ–¥ –ø–µ—Ä—à–æ–≥–æ `[Embeddings] Batch 1/8` –¥–æ `Progress: 150/150`
- –ú–∞—î –±—É—Ç–∏ **~15-20 —Å–µ–∫—É–Ω–¥** –∑–∞–º—ñ—Å—Ç—å ~30-35

---

## üìä –©–æ –ø–æ–±–∞—á–∏—Ç–µ –≤ –ª–æ–≥–∞—Ö

### –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞ –≤–µ—Ä—Å—ñ—è:
```
[Embeddings] Processing 150 chunks (1556938 chars total)
[Embeddings] Batch 1/8 (20 chunks)...
[LocalEmbeddings] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è 20 embeddings...
[LocalEmbeddings] –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ 20 embeddings
[Embeddings] Progress: 20/150 chunks processed
[Embeddings] Batch 2/8 (20 chunks)...
[LocalEmbeddings] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è 20 embeddings...
[LocalEmbeddings] –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ 20 embeddings
[Embeddings] Progress: 40/150 chunks processed
...
[Embeddings] Progress: 150/150 chunks processed
[Embeddings] Successfully generated embeddings
[Embeddings] Stats: 150 processed, 0 errors
```

**–ö–ª—é—á–æ–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ:**
- ‚úÖ `Batch 1/8` –∑–∞–º—ñ—Å—Ç—å `batch 1/15` (–º–µ–Ω—à–µ –±–∞—Ç—á—ñ–≤)
- ‚úÖ `20 chunks` –∑–∞–º—ñ—Å—Ç—å `10 chunks` (–±—ñ–ª—å—à–∏–π batch)
- ‚úÖ –ú–µ–Ω—à–µ —Ä—è–¥–∫—ñ–≤ –ª–æ–≥—ñ–≤ (—à–≤–∏–¥—à–µ I/O)

---

## üéØ –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª—ñ |
|-----------|--------|--------|
| **Backend** | ‚úÖ –ó–∞–ø—É—â–µ–Ω–∏–π | Port 3001, process ID 10 |
| **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è** | ‚úÖ –ó–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–∞ | BATCH_SIZE=20, –ø–∞—É–∑–∏ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ |
| **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è** | ‚è≥ –û—á—ñ–∫—É—î | –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ PDF –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ |

---

## üí° –©–æ –¥–∞–ª—ñ?

### –Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î –¥–æ–±—Ä–µ:
‚úÖ –ù–∞—Å–æ–ª–æ–¥–∂—É–π—Ç–µ—Å—å 2x —à–≤–∏–¥–∫—ñ—Å—Ç—é!

### –Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ —â–µ —à–≤–∏–¥—à–µ:
1. **–ó–±—ñ–ª—å—à–∏—Ç–∏ batch –¥–æ 30**: –†–µ–¥–∞–≥—É–π—Ç–µ `BATCH_SIZE = 30` –≤ `backend/src/services/embeddings.ts`
2. **–ó–º–µ–Ω—à–∏—Ç–∏ chunks –¥–æ 100**: –†–µ–¥–∞–≥—É–π—Ç–µ `MAX_CHUNKS = 100`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å backend: `npm run dev`

### –Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ backend
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –º–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–ª–∞—Å—å: `[LocalEmbeddings] –ú–æ–¥–µ–ª—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞ —É—Å–ø—ñ—à–Ω–æ!`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ RAM: –ú–∞—î –±—É—Ç–∏ ~60-100 MB

---

## üìÅ –ó–º—ñ–Ω–µ–Ω—ñ —Ñ–∞–π–ª–∏

- ‚úÖ `backend/src/services/embeddings.ts` - BATCH_SIZE=20, –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω—ñ –ø–∞—É–∑–∏
- ‚úÖ `backend/EMBEDDINGS_OPTIMIZATION.md` - –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- ‚úÖ `backend/–®–í–ò–î–ö–ò–ô_–°–¢–ê–†–¢_–û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–á.md` - –¶–µ–π —Ñ–∞–π–ª

---

## üéâ –ü—ñ–¥—Å—É–º–æ–∫

–í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä:
- ‚ö° **2x —à–≤–∏–¥—à–∞** –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è embeddings
- üí∞ **–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∞** (–ª–æ–∫–∞–ª—å–Ω–∞ –º–æ–¥–µ–ª—å)
- üá∫üá¶ **–ü—ñ–¥—Ç—Ä–∏–º—É—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—É** –º–æ–≤—É
- üîí **–ü—Ä–∏–≤–∞—Ç–Ω–∞** (–¥–∞–Ω—ñ –Ω–µ –π–¥—É—Ç—å –≤ OpenAI)
- üíæ **–ï—Ñ–µ–∫—Ç–∏–≤–Ω–∞** (~60 MB RAM)

**–ì–æ—Ç–æ–≤–æ –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è!** üöÄ
